@using System.Web.Mvc
@using System.Web.Mvc
@using Vino.Server.Services.MainServices.CRM.Contact.Models
@model Vino.Server.Services.MainServices.CRM.LclExp.Models.LclExpModel

@{
    ViewData["Title"] = "Create";
}

<body>
    <section class="out-bar-top">
        <i class="mdi mdi-truck-fast"></i>
        <ul class="out-bar-line">
            <li><a href="#" title="">Exports</a></li>
            <li><a href="#" title="">Lcl Export</a></li>
            <li><a href="#" title="">Edit</a></li>
        </ul>
    </section>
    <div class="col-sm-12 col-md-12 col-lg-12">
        @using (@Html.BeginForm("Edit", "LclExps", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.Partial("_AddEdit", Model)

            <label style="display: block">&nbsp;</label>
            <span id="btn-back" class="btn pull-right"><i class="mdi mdi-refresh"></i>&nbsp;Back</span>
            <button type="submit" name="btnSaveEdit" value="save" id="save" class="btn pull-right"><i class="mdi mdi-floppy"></i>&nbsp;Save</button>
            <span id="btn-delete" class="btn pull-right"><i class="mdi mdi-delete"></i>&nbsp;Delete</span>
            if (Model.Id > 0)
            {

                <a id="btn-printt"  href="@Url.Action("CreateAndDownload", "LclExps", new {id = Model.Id})"
                      class="btn pull-right"><i class="mdi print"></i>&nbsp;Print</a>

                @*<script>
                    function CreateAndDownloadPdf(id) {
                        console.log("Enter download" + id);
                        $.ajax({
                            url: "@Url.Action("CreateAndDownload", "LclExps")",
                            type: "POST",
                            cache: false,
                            async: false,
                            dataType : 'binary',
                            contentType: 'application/json',
                            data: JSON.stringify({ id: id }),
                            success: function (data) { 
                                
                            },
                            error: function (xhr, ajaxOptions, thrownError) {
                                console.log("Error saving new data by ajax " + thrownError + " " + xhr.error + thrownError.error);
                            }
                        });
                    };

                    function OnComplete(result) { 
                        alert(result);
                    }

                    function OnFail(result) {   
                        alert('Request failed');
                    }
                </script>*@
            }


        }

    </div>
</body>

<div id="back-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Xác nhận</h4>
            </div>

            <div class="modal-body">
                <p>Bạn có muốn lưu thay đổi ?</p>
            </div>
            <div class="modal-footer">
                <button id="btn-exit-without-save" type="button" class="btn btn-default" data-dismiss="modal">Không! cảm ơn.</button>
                <button id="btn-save_change" type="button" class="btn btn-primary">Đồng ý</button>
            </div>
        </div>
    </div>
</div>

@*<div id="delete-modal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Xác nhận</h4>
                </div>
                @using (Html.BeginForm("Delete", "LclExps", new { id = Model.Id }))
                {
                    <div class="modal-body">
                        <p>Bạn có chắc chắn muốn xóa?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Không! cảm ơn.</button>
                        <button type="submit" class="btn btn-primary">Đồng ý</button>
                    </div>
                }
            </div>
        </div>
    </div>*@



}


<script>
    $("#btn-delete").click(function () {
        console.log("Delete button click");
        $("#delete-modal").modal("show");
    });
    $("#btn-back").click(function () {
        console.log("BACK button click");

        $("#back-modal").modal("show");
    });
    $("#btn-exit-without-save").click(function () {
        window.location.replace("/admin/lclexps");
    });
    $("#btn-save_change").click(function () {
        console.log("save change click");
        $('#save').click();
    });

    $("#btn-save_change").click(function () {
        console.log("save change click");
        $('#save').click();
    });


</script>





